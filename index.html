<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Simple date difference app</title>
    <meta name="description" content="date difference app">
    <meta name="author" content="Nathanael Merlin">
  </head>

  <body>
    <div id="output"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
    <script>
      let valid_formats = [ 'years', 'months', 'weeks', 'days', 'hours', 'minutes', 'seconds' ]

      let params = (new URL(document.location)).searchParams;
      let date = params.get('date') || moment('2015-11-05').format('Y-MM-DD')
      let format = params.get('format')

      if (!valid_formats.includes(format)) format = 'days'

      let output = document.getElementById('output')
      output.textContent = moment().diff(date, format)
    </script>
  </body>
</html>
